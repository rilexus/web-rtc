{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/stanislavpanchenko/Documents/development/web-rtc/web-rtc-client/src/pages/chat/Chat.page.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useLayoutEffect, useRef, useState } from \"react\";\nimport { LogoutButton } from \"./components/logout-button/logout-button\";\nimport { UserList } from \"./components/user-list/UserList\";\nimport { useAuthentication } from \"../../context/authentication/Authentication.context\";\nimport { socket } from \"../../socket/socket\";\n\nconst openMediaDevices = async constraints => {\n  return await navigator.mediaDevices.getUserMedia(constraints);\n}; // const stream = await navigator.mediaDevices.getUserMedia({\n//   video: true,\n//   audio: true,\n// });\n// yourVideo.srcObject = stream;\n\n\nconst configuration = {\n  iceServers: [{\n    urls: \"stun:stun.1.google.com:19302\"\n  }]\n}; // const yours = new RTCPeerConnection(configuration);\n// const theirs = new RTCPeerConnection(configuration);\n// for (const track of stream.getTracks()) {\n//   yours.addTrack(track, stream);\n// }\n// theirs.ontrack = (e) => (theirVideo.srcObject = e.streams[0]);\n// yours.onicecandidate = (e) => theirs.addIceCandidate(e.candidate);\n// theirs.onicecandidate = (e) => yours.addIceCandidate(e.candidate);\n// const offer = await yours.createOffer();\n// await yours.setLocalDescription(offer);\n// await theirs.setRemoteDescription(offer);\n// const answer = await theirs.createAnswer();\n// await theirs.setLocalDescription(answer);\n// await yours.setRemoteDescription(answer);\n\nconst ChatPage = () => {\n  _s();\n\n  const [hasOffer, setHasOffer] = useState(false);\n  const ownVideoRef = useRef();\n  const foreignVideoRef = useRef();\n  const peerConnectionRef = useRef(new RTCPeerConnection(configuration));\n  const offerRef = useRef({\n    from: null,\n    offer: null\n  });\n  const [isCalling, setIsCalling] = useState(false);\n  const [{\n    name: currentUserName\n  }] = useAuthentication();\n  const ownStream = useRef();\n  useLayoutEffect(() => {\n    const call = async () => {\n      peerConnectionRef.current.onicecandidate = ({\n        candidate\n      }) => {\n        console.log({\n          candidate\n        }); // socket.emit(\"onicecandidate\", {\n        //   candidate,\n        //   to: name,\n        //   from: currentUserName,\n        // });\n      };\n\n      ownStream.current = await navigator.mediaDevices.getUserMedia({\n        video: true,\n        audio: true\n      });\n      ownVideoRef.current.srcObject = ownStream.current;\n\n      for (const track of ownStream.current.getTracks()) {\n        peerConnectionRef.current.addTrack(track, ownStream.current);\n      }\n\n      socket.on('onicecandidate', ({\n        candidate\n      }) => {});\n      socket.on(\"video:answer\", async ({\n        answer,\n        to,\n        from\n      }) => {\n        console.log({\n          answer,\n          to,\n          from\n        });\n        await peerConnectionRef.current.setRemoteDescription(answer);\n      });\n      socket.on(\"video:offer\", async ({\n        offer,\n        to,\n        from\n      }) => {\n        console.log({\n          offer,\n          to,\n          from\n        });\n        await peerConnectionRef.current.setRemoteDescription(offer);\n        const answer = await peerConnectionRef.current.createAnswer();\n        await peerConnectionRef.current.setLocalDescription(answer);\n        socket.emit(\"video:answer\", {\n          answer,\n          to: from,\n          from: to\n        });\n      });\n\n      peerConnectionRef.current.ontrack = ({\n        streams\n      }) => {\n        foreignVideoRef.current.srcObject = streams[0];\n      };\n    };\n\n    call();\n  }, []);\n\n  const pickUp = async () => {};\n\n  const hangUp = () => {\n    if (offerRef.current) {// implement call decline\n    }\n  };\n\n  const onVideo = async name => {\n    const offer = await peerConnectionRef.current.createOffer();\n    await peerConnectionRef.current.setLocalDescription(offer);\n    socket.emit(\"video:offer\", {\n      offer,\n      from: currentUserName,\n      to: name\n    });\n  };\n\n  const onAudio = name => {};\n\n  useLayoutEffect(() => {\n    const connect = async () => {\n      try {// localStream = await openMediaDevices(constraints);\n        //\n        // ownVideoRef.current.srcObject = localStream;\n        // foreignVideoRef.current.srcObject = remoteStream;\n      } catch (e) {\n        console.error(e);\n      }\n    };\n\n    connect();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(UserList, {\n      onAudio: onAudio,\n      onVideo: onVideo\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }, this), hasOffer && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"CALLING....\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: pickUp,\n        children: \"PICK UP\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 9\n    }, this), isCalling && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"CALLING...!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(LogoutButton, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"local\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"video\", {\n          id: \"ownVideo\",\n          ref: ownVideoRef,\n          autoPlay: true,\n          playsInline: true,\n          controls: false,\n          style: {\n            height: \"300px\",\n            width: \"300px\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"remote\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"video\", {\n          id: \"foreignVideo\",\n          ref: foreignVideoRef,\n          autoPlay: true,\n          playsInline: true,\n          controls: false,\n          style: {\n            height: \"300px\",\n            width: \"300px\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 133,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ChatPage, \"+P/Q02Tmzhl5m464t22LC5f7EBg=\", false, function () {\n  return [useAuthentication];\n});\n\n_c = ChatPage;\nexport { ChatPage };\n\nvar _c;\n\n$RefreshReg$(_c, \"ChatPage\");","map":{"version":3,"sources":["/Users/stanislavpanchenko/Documents/development/web-rtc/web-rtc-client/src/pages/chat/Chat.page.tsx"],"names":["React","useLayoutEffect","useRef","useState","LogoutButton","UserList","useAuthentication","socket","openMediaDevices","constraints","navigator","mediaDevices","getUserMedia","configuration","iceServers","urls","ChatPage","hasOffer","setHasOffer","ownVideoRef","foreignVideoRef","peerConnectionRef","RTCPeerConnection","offerRef","from","offer","isCalling","setIsCalling","name","currentUserName","ownStream","call","current","onicecandidate","candidate","console","log","video","audio","srcObject","track","getTracks","addTrack","on","answer","to","setRemoteDescription","createAnswer","setLocalDescription","emit","ontrack","streams","pickUp","hangUp","onVideo","createOffer","onAudio","connect","e","error","height","width"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAA2BC,eAA3B,EAA4CC,MAA5C,EAAoDC,QAApD,QAAoE,OAApE;AACA,SAASC,YAAT,QAA6B,0CAA7B;AACA,SAASC,QAAT,QAAyB,iCAAzB;AACA,SAASC,iBAAT,QAAkC,qDAAlC;AACA,SAASC,MAAT,QAAuB,qBAAvB;;AAEA,MAAMC,gBAAgB,GAAG,MAAOC,WAAP,IAA4B;AACnD,SAAO,MAAMC,SAAS,CAACC,YAAV,CAAuBC,YAAvB,CAAoCH,WAApC,CAAb;AACD,CAFD,C,CAIA;AACA;AACA;AACA;AACA;;;AAEA,MAAMI,aAAa,GAAG;AACpBC,EAAAA,UAAU,EAAE,CAAC;AAAEC,IAAAA,IAAI,EAAE;AAAR,GAAD;AADQ,CAAtB,C,CAGA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AACA;;AAEA,MAAMC,QAAQ,GAAG,MAAM;AAAA;;AACrB,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0Bf,QAAQ,CAAC,KAAD,CAAxC;AACA,QAAMgB,WAAW,GAAGjB,MAAM,EAA1B;AACA,QAAMkB,eAAe,GAAGlB,MAAM,EAA9B;AAEA,QAAMmB,iBAAiB,GAAGnB,MAAM,CAAM,IAAIoB,iBAAJ,CAAsBT,aAAtB,CAAN,CAAhC;AAEA,QAAMU,QAAQ,GAAGrB,MAAM,CAAsC;AAC3DsB,IAAAA,IAAI,EAAE,IADqD;AAE3DC,IAAAA,KAAK,EAAE;AAFoD,GAAtC,CAAvB;AAIA,QAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4BxB,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM,CAAC;AAAEyB,IAAAA,IAAI,EAAEC;AAAR,GAAD,IAA8BvB,iBAAiB,EAArD;AACA,QAAMwB,SAAS,GAAG5B,MAAM,EAAxB;AAEAD,EAAAA,eAAe,CAAC,MAAM;AACpB,UAAM8B,IAAI,GAAG,YAAY;AACvBV,MAAAA,iBAAiB,CAACW,OAAlB,CAA0BC,cAA1B,GAA2C,CAAC;AAAEC,QAAAA;AAAF,OAAD,KAAwB;AACjEC,QAAAA,OAAO,CAACC,GAAR,CAAY;AAAEF,UAAAA;AAAF,SAAZ,EADiE,CAEjE;AACA;AACA;AACA;AACA;AACD,OAPD;;AASAJ,MAAAA,SAAS,CAACE,OAAV,GAAoB,MAAMtB,SAAS,CAACC,YAAV,CAAuBC,YAAvB,CAAoC;AAC5DyB,QAAAA,KAAK,EAAE,IADqD;AAE5DC,QAAAA,KAAK,EAAE;AAFqD,OAApC,CAA1B;AAIAnB,MAAAA,WAAW,CAACa,OAAZ,CAAoBO,SAApB,GAAgCT,SAAS,CAACE,OAA1C;;AAEA,WAAK,MAAMQ,KAAX,IAAoBV,SAAS,CAACE,OAAV,CAAkBS,SAAlB,EAApB,EAAmD;AACjDpB,QAAAA,iBAAiB,CAACW,OAAlB,CAA0BU,QAA1B,CAAmCF,KAAnC,EAA0CV,SAAS,CAACE,OAApD;AACD;;AAEDzB,MAAAA,MAAM,CAACoC,EAAP,CAAU,gBAAV,EAA4B,CAAC;AAAET,QAAAA;AAAF,OAAD,KAAwB,CAEnD,CAFD;AAIA3B,MAAAA,MAAM,CAACoC,EAAP,CAAU,cAAV,EAA0B,OAAO;AAAEC,QAAAA,MAAF;AAAUC,QAAAA,EAAV;AAAcrB,QAAAA;AAAd,OAAP,KAAqC;AAC7DW,QAAAA,OAAO,CAACC,GAAR,CAAY;AAAEQ,UAAAA,MAAF;AAAUC,UAAAA,EAAV;AAAcrB,UAAAA;AAAd,SAAZ;AACA,cAAMH,iBAAiB,CAACW,OAAlB,CAA0Bc,oBAA1B,CAA+CF,MAA/C,CAAN;AACD,OAHD;AAKArC,MAAAA,MAAM,CAACoC,EAAP,CAAU,aAAV,EAAyB,OAAO;AAAElB,QAAAA,KAAF;AAASoB,QAAAA,EAAT;AAAarB,QAAAA;AAAb,OAAP,KAAoC;AAC3DW,QAAAA,OAAO,CAACC,GAAR,CAAY;AAAEX,UAAAA,KAAF;AAASoB,UAAAA,EAAT;AAAarB,UAAAA;AAAb,SAAZ;AACA,cAAMH,iBAAiB,CAACW,OAAlB,CAA0Bc,oBAA1B,CAA+CrB,KAA/C,CAAN;AAEA,cAAMmB,MAAM,GAAG,MAAMvB,iBAAiB,CAACW,OAAlB,CAA0Be,YAA1B,EAArB;AACA,cAAM1B,iBAAiB,CAACW,OAAlB,CAA0BgB,mBAA1B,CAA8CJ,MAA9C,CAAN;AAEArC,QAAAA,MAAM,CAAC0C,IAAP,CAAY,cAAZ,EAA4B;AAAEL,UAAAA,MAAF;AAAUC,UAAAA,EAAE,EAAErB,IAAd;AAAoBA,UAAAA,IAAI,EAAEqB;AAA1B,SAA5B;AACD,OARD;;AAUAxB,MAAAA,iBAAiB,CAACW,OAAlB,CAA0BkB,OAA1B,GAAoC,CAAC;AAAEC,QAAAA;AAAF,OAAD,KAAsB;AACxD/B,QAAAA,eAAe,CAACY,OAAhB,CAAwBO,SAAxB,GAAoCY,OAAO,CAAC,CAAD,CAA3C;AACD,OAFD;AAGD,KA1CD;;AA2CApB,IAAAA,IAAI;AACL,GA7Cc,EA6CZ,EA7CY,CAAf;;AA+CA,QAAMqB,MAAM,GAAG,YAAY,CAAE,CAA7B;;AAEA,QAAMC,MAAM,GAAG,MAAM;AACnB,QAAI9B,QAAQ,CAACS,OAAb,EAAsB,CACpB;AACD;AACF,GAJD;;AAMA,QAAMsB,OAAO,GAAG,MAAO1B,IAAP,IAAwB;AACtC,UAAMH,KAAK,GAAG,MAAMJ,iBAAiB,CAACW,OAAlB,CAA0BuB,WAA1B,EAApB;AACA,UAAMlC,iBAAiB,CAACW,OAAlB,CAA0BgB,mBAA1B,CAA8CvB,KAA9C,CAAN;AACAlB,IAAAA,MAAM,CAAC0C,IAAP,CAAY,aAAZ,EAA2B;AAAExB,MAAAA,KAAF;AAASD,MAAAA,IAAI,EAAEK,eAAf;AAAgCgB,MAAAA,EAAE,EAAEjB;AAApC,KAA3B;AACD,GAJD;;AAMA,QAAM4B,OAAO,GAAI5B,IAAD,IAAkB,CAAE,CAApC;;AAEA3B,EAAAA,eAAe,CAAC,MAAM;AACpB,UAAMwD,OAAO,GAAG,YAAY;AAC1B,UAAI,CACF;AACA;AACA;AACA;AACD,OALD,CAKE,OAAOC,CAAP,EAAU;AACVvB,QAAAA,OAAO,CAACwB,KAAR,CAAcD,CAAd;AACD;AACF,KATD;;AAUAD,IAAAA,OAAO;AACR,GAZc,EAYZ,EAZY,CAAf;AAcA,sBACE;AAAA,4BACE,QAAC,QAAD;AAAU,MAAA,OAAO,EAAED,OAAnB;AAA4B,MAAA,OAAO,EAAEF;AAArC;AAAA;AAAA;AAAA;AAAA,YADF,EAEGrC,QAAQ,iBACP;AAAA,8BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAEE;AAAQ,QAAA,OAAO,EAAEmC,MAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFF;AAAA;AAAA;AAAA;AAAA;AAAA,YAHJ,EASG1B,SAAS,iBACR;AAAA,6BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YAVJ,eAcE,QAAC,YAAD;AAAA;AAAA;AAAA;AAAA,YAdF,eAgBE;AAAA,8BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAEE;AAAA,+BACE;AACE,UAAA,EAAE,EAAE,UADN;AAEE,UAAA,GAAG,EAAEP,WAFP;AAGE,UAAA,QAAQ,MAHV;AAIE,UAAA,WAAW,MAJb;AAKE,UAAA,QAAQ,EAAE,KALZ;AAME,UAAA,KAAK,EAAE;AACLyC,YAAAA,MAAM,EAAE,OADH;AAELC,YAAAA,KAAK,EAAE;AAFF;AANT;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cAFF;AAAA;AAAA;AAAA;AAAA;AAAA,YAhBF,eAgCE;AAAA,8BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAEE;AAAA,+BACE;AACE,UAAA,EAAE,EAAE,cADN;AAEE,UAAA,GAAG,EAAEzC,eAFP;AAGE,UAAA,QAAQ,MAHV;AAIE,UAAA,WAAW,MAJb;AAKE,UAAA,QAAQ,EAAE,KALZ;AAME,UAAA,KAAK,EAAE;AACLwC,YAAAA,MAAM,EAAE,OADH;AAELC,YAAAA,KAAK,EAAE;AAFF;AANT;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cAFF;AAAA;AAAA;AAAA;AAAA;AAAA,YAhCF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAmDD,CA/ID;;GAAM7C,Q;UAYgCV,iB;;;KAZhCU,Q;AAiJN,SAASA,QAAT","sourcesContent":["import React, { useEffect, useLayoutEffect, useRef, useState } from \"react\";\nimport { LogoutButton } from \"./components/logout-button/logout-button\";\nimport { UserList } from \"./components/user-list/UserList\";\nimport { useAuthentication } from \"../../context/authentication/Authentication.context\";\nimport { socket } from \"../../socket/socket\";\n\nconst openMediaDevices = async (constraints: any) => {\n  return await navigator.mediaDevices.getUserMedia(constraints);\n};\n\n// const stream = await navigator.mediaDevices.getUserMedia({\n//   video: true,\n//   audio: true,\n// });\n// yourVideo.srcObject = stream;\n\nconst configuration = {\n  iceServers: [{ urls: \"stun:stun.1.google.com:19302\" }],\n};\n// const yours = new RTCPeerConnection(configuration);\n// const theirs = new RTCPeerConnection(configuration);\n\n// for (const track of stream.getTracks()) {\n//   yours.addTrack(track, stream);\n// }\n// theirs.ontrack = (e) => (theirVideo.srcObject = e.streams[0]);\n\n// yours.onicecandidate = (e) => theirs.addIceCandidate(e.candidate);\n\n// theirs.onicecandidate = (e) => yours.addIceCandidate(e.candidate);\n\n// const offer = await yours.createOffer();\n// await yours.setLocalDescription(offer);\n// await theirs.setRemoteDescription(offer);\n\n// const answer = await theirs.createAnswer();\n// await theirs.setLocalDescription(answer);\n// await yours.setRemoteDescription(answer);\n\nconst ChatPage = () => {\n  const [hasOffer, setHasOffer] = useState(false);\n  const ownVideoRef = useRef<any>();\n  const foreignVideoRef = useRef<any>();\n\n  const peerConnectionRef = useRef<any>(new RTCPeerConnection(configuration));\n\n  const offerRef = useRef<{ from: string | null; offer: any }>({\n    from: null,\n    offer: null,\n  });\n  const [isCalling, setIsCalling] = useState(false);\n  const [{ name: currentUserName }] = useAuthentication();\n  const ownStream = useRef<any>();\n\n  useLayoutEffect(() => {\n    const call = async () => {\n      peerConnectionRef.current.onicecandidate = ({ candidate }: any) => {\n        console.log({ candidate });\n        // socket.emit(\"onicecandidate\", {\n        //   candidate,\n        //   to: name,\n        //   from: currentUserName,\n        // });\n      };\n\n      ownStream.current = await navigator.mediaDevices.getUserMedia({\n        video: true,\n        audio: true,\n      });\n      ownVideoRef.current.srcObject = ownStream.current;\n\n      for (const track of ownStream.current.getTracks()) {\n        peerConnectionRef.current.addTrack(track, ownStream.current);\n      }\n\n      socket.on('onicecandidate', ({ candidate }: any) => {\n\n      })\n\n      socket.on(\"video:answer\", async ({ answer, to, from }: any) => {\n        console.log({ answer, to, from });\n        await peerConnectionRef.current.setRemoteDescription(answer);\n      });\n\n      socket.on(\"video:offer\", async ({ offer, to, from }: any) => {\n        console.log({ offer, to, from });\n        await peerConnectionRef.current.setRemoteDescription(offer);\n\n        const answer = await peerConnectionRef.current.createAnswer();\n        await peerConnectionRef.current.setLocalDescription(answer);\n\n        socket.emit(\"video:answer\", { answer, to: from, from: to });\n      });\n\n      peerConnectionRef.current.ontrack = ({ streams }: any) => {\n        foreignVideoRef.current.srcObject = streams[0];\n      };\n    };\n    call();\n  }, []);\n\n  const pickUp = async () => {};\n\n  const hangUp = () => {\n    if (offerRef.current) {\n      // implement call decline\n    }\n  };\n\n  const onVideo = async (name: string) => {\n    const offer = await peerConnectionRef.current.createOffer();\n    await peerConnectionRef.current.setLocalDescription(offer);\n    socket.emit(\"video:offer\", { offer, from: currentUserName, to: name });\n  };\n\n  const onAudio = (name: string) => {};\n\n  useLayoutEffect(() => {\n    const connect = async () => {\n      try {\n        // localStream = await openMediaDevices(constraints);\n        //\n        // ownVideoRef.current.srcObject = localStream;\n        // foreignVideoRef.current.srcObject = remoteStream;\n      } catch (e) {\n        console.error(e);\n      }\n    };\n    connect();\n  }, []);\n\n  return (\n    <div>\n      <UserList onAudio={onAudio} onVideo={onVideo} />\n      {hasOffer && (\n        <div>\n          <div>CALLING....</div>\n          <button onClick={pickUp}>PICK UP</button>\n          {/*<button>HANG UP</button>*/}\n        </div>\n      )}\n      {isCalling && (\n        <div>\n          <div>CALLING...!</div>\n        </div>\n      )}\n      <LogoutButton />\n\n      <div>\n        <div>local</div>\n        <div>\n          <video\n            id={\"ownVideo\"}\n            ref={ownVideoRef}\n            autoPlay\n            playsInline\n            controls={false}\n            style={{\n              height: \"300px\",\n              width: \"300px\",\n            }}\n          />\n        </div>\n      </div>\n      <div>\n        <div>remote</div>\n        <div>\n          <video\n            id={\"foreignVideo\"}\n            ref={foreignVideoRef}\n            autoPlay\n            playsInline\n            controls={false}\n            style={{\n              height: \"300px\",\n              width: \"300px\",\n            }}\n          />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport { ChatPage };\n"]},"metadata":{},"sourceType":"module"}