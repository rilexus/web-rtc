{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useRef } from \"react\";\nimport { socket } from \"../socket\";\n\nfunction useSubscription(type, callback) {\n  _s();\n\n  const ref = useRef(callback);\n  ref.current = callback;\n  useEffect(() => {\n    const handle = (...args) => {\n      callback(...args);\n    };\n\n    console.log(socket);\n    socket.on(type, handle);\n    return () => socket.removeEventListener(type, handle);\n  }, [type, ref]);\n}\n\n_s(useSubscription, \"8uVE59eA/r6b92xF80p7sH8rXLk=\");\n\nexport { useSubscription };","map":{"version":3,"sources":["/Users/stanislavpanchenko/Documents/development/web-rtc/web-rtc-client/src/socket/use-subscription/useSubscription.ts"],"names":["useEffect","useRef","socket","useSubscription","type","callback","ref","current","handle","args","console","log","on","removeEventListener"],"mappings":";;AAAA,SAAQA,SAAR,EAAmBC,MAAnB,QAAgC,OAAhC;AACA,SAAQC,MAAR,QAAqB,WAArB;;AAEA,SAASC,eAAT,CAAyBC,IAAzB,EAAuCC,QAAvC,EAAwE;AAAA;;AACtE,QAAMC,GAAG,GAAGL,MAAM,CAACI,QAAD,CAAlB;AACAC,EAAAA,GAAG,CAACC,OAAJ,GAAcF,QAAd;AACAL,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMQ,MAAM,GAAG,CAAC,GAAGC,IAAJ,KAAkB;AAC/BJ,MAAAA,QAAQ,CAAC,GAAGI,IAAJ,CAAR;AACD,KAFD;;AAGAC,IAAAA,OAAO,CAACC,GAAR,CAAYT,MAAZ;AACAA,IAAAA,MAAM,CAACU,EAAP,CAAUR,IAAV,EAAgBI,MAAhB;AACA,WAAO,MAAMN,MAAM,CAACW,mBAAP,CAA2BT,IAA3B,EAAiCI,MAAjC,CAAb;AACD,GAPQ,EAON,CAACJ,IAAD,EAAME,GAAN,CAPM,CAAT;AAQD;;GAXQH,e;;AAYT,SAAQA,eAAR","sourcesContent":["import {useEffect, useRef} from \"react\";\nimport {socket} from \"../socket\";\n\nfunction useSubscription(type: string, callback: (...args: any) => void){\n  const ref = useRef(callback)\n  ref.current = callback\n  useEffect(() => {\n    const handle = (...args: any) => {\n      callback(...args)\n    }\n    console.log(socket)\n    socket.on(type, handle)\n    return () => socket.removeEventListener(type, handle)\n  }, [type,ref])\n}\nexport {useSubscription}"]},"metadata":{},"sourceType":"module"}