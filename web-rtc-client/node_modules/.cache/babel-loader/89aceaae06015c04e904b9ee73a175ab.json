{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/stanislavpanchenko/Documents/development/web-rtc/web-rtc-client/src/authentication/providers/Authentication.provider.tsx\",\n    _s = $RefreshSig$();\n\nimport { useLocalStorage } from \"../../hooks/use-local-storage/useLocalStorage\";\nimport { api } from \"../../api/Api\";\nimport { socketConnector } from \"../../socket/react-socket-connector/react-socket-connector\";\nimport React from \"react\";\nimport { DispatchProvider, ValueProvider } from \"../context/Authentication.context\";\nimport { AuthenticationActionTypes } from \"../types/Authentication.action-type\";\nimport { defaultAuthentication } from \"../context/default-context-value\";\n\nconst _AuthenticationProvider = ({\n  children\n}) => {\n  _s();\n\n  const [auth, setValue, remove] = useLocalStorage(\"login\", { ...defaultAuthentication\n  });\n\n  const isAuthenticated = () => {\n    return false;\n  };\n\n  const login = async (username, password) => {\n    // socketLogin(name, password).then((res: any) => {\n    //   console.log(res);\n    //   setValue((val) => ({ ...val, isLoggedIn: true, name: name }));\n    // });\n    const res = await api.login(username, password);\n    console.log(res);\n    setValue(v => ({ ...v,\n      isLoggedIn: true,\n      username: username\n    }));\n  };\n\n  const logout = () => {\n    setValue(val => ({ ...val,\n      isLoggedIn: false,\n      username: \"\",\n      key: \"\"\n    }));\n  };\n\n  const dispatch = action => {\n    var _switch$action$type;\n\n    const _switch = {\n      [AuthenticationActionTypes.login]: action => login(action.payload.name, action.payload.password),\n      [AuthenticationActionTypes.logout]: action => logout()\n    }; // @ts-ignore\n\n    (_switch$action$type = _switch[action.type]) === null || _switch$action$type === void 0 ? void 0 : _switch$action$type.call(_switch, action);\n  };\n\n  return /*#__PURE__*/_jsxDEV(ValueProvider, {\n    value: auth,\n    children: /*#__PURE__*/_jsxDEV(DispatchProvider, {\n      value: dispatch,\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n};\n\n_s(_AuthenticationProvider, \"8n9yTZAPxxRxwsSnDZ9NOm7BL40=\", false, function () {\n  return [useLocalStorage];\n});\n\nconst AuthenticationProvider = socketConnector(dispatch => {\n  return {\n    login: (name, password) => dispatch({\n      type: \"login\",\n      payload: {\n        name,\n        password\n      }\n    })\n  };\n})(_AuthenticationProvider);\nexport { AuthenticationProvider };","map":{"version":3,"sources":["/Users/stanislavpanchenko/Documents/development/web-rtc/web-rtc-client/src/authentication/providers/Authentication.provider.tsx"],"names":["useLocalStorage","api","socketConnector","React","DispatchProvider","ValueProvider","AuthenticationActionTypes","defaultAuthentication","_AuthenticationProvider","children","auth","setValue","remove","isAuthenticated","login","username","password","res","console","log","v","isLoggedIn","logout","val","key","dispatch","action","_switch","payload","name","type","AuthenticationProvider"],"mappings":";;;;;AAAA,SAASA,eAAT,QAAgC,+CAAhC;AACA,SAASC,GAAT,QAAoB,eAApB;AACA,SAASC,eAAT,QAAgC,4DAAhC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SACEC,gBADF,EAEEC,aAFF,QAGO,mCAHP;AAKA,SAEEC,yBAFF,QAKO,qCALP;AAMA,SAASC,qBAAT,QAAsC,kCAAtC;;AAEA,MAAMC,uBAAuB,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAuB;AAAA;;AACrD,QAAM,CAACC,IAAD,EAAOC,QAAP,EAAiBC,MAAjB,IAA2BZ,eAAe,CAC9C,OAD8C,EAE9C,EACE,GAAGO;AADL,GAF8C,CAAhD;;AAOA,QAAMM,eAAe,GAAG,MAAe;AACrC,WAAO,KAAP;AACD,GAFD;;AAIA,QAAMC,KAAK,GAAG,OAAOC,QAAP,EAAyBC,QAAzB,KAA8C;AAC1D;AACA;AACA;AACA;AACA,UAAMC,GAAG,GAAG,MAAMhB,GAAG,CAACa,KAAJ,CAAUC,QAAV,EAAoBC,QAApB,CAAlB;AACAE,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACAN,IAAAA,QAAQ,CAAES,CAAD,KAAQ,EAAE,GAAGA,CAAL;AAAQC,MAAAA,UAAU,EAAE,IAApB;AAA0BN,MAAAA,QAAQ,EAAEA;AAApC,KAAR,CAAD,CAAR;AACD,GARD;;AAUA,QAAMO,MAAM,GAAG,MAAM;AACnBX,IAAAA,QAAQ,CAAEY,GAAD,KAAU,EAAE,GAAGA,GAAL;AAAUF,MAAAA,UAAU,EAAE,KAAtB;AAA6BN,MAAAA,QAAQ,EAAE,EAAvC;AAA2CS,MAAAA,GAAG,EAAE;AAAhD,KAAV,CAAD,CAAR;AACD,GAFD;;AAIA,QAAMC,QAAQ,GAAIC,MAAD,IAAmC;AAAA;;AAClD,UAAMC,OAAO,GAAG;AACd,OAACrB,yBAAyB,CAACQ,KAA3B,GAAoCY,MAAD,IACjCZ,KAAK,CAACY,MAAM,CAACE,OAAP,CAAeC,IAAhB,EAAsBH,MAAM,CAACE,OAAP,CAAeZ,QAArC,CAFO;AAGd,OAACV,yBAAyB,CAACgB,MAA3B,GAAqCI,MAAD,IAA0BJ,MAAM;AAHtD,KAAhB,CADkD,CAMlD;;AACA,2BAAAK,OAAO,CAACD,MAAM,CAACI,IAAR,CAAP,iFAAAH,OAAO,EAAgBD,MAAhB,CAAP;AACD,GARD;;AAUA,sBACE,QAAC,aAAD;AAAe,IAAA,KAAK,EAAEhB,IAAtB;AAAA,2BACE,QAAC,gBAAD;AAAkB,MAAA,KAAK,EAAEe,QAAzB;AAAA,gBAAoChB;AAApC;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AAKD,CAzCD;;GAAMD,uB;UAC6BR,e;;;AA0CnC,MAAM+B,sBAAsB,GAAG7B,eAAe,CAAEuB,QAAD,IAAc;AAC3D,SAAO;AACLX,IAAAA,KAAK,EAAE,CAACe,IAAD,EAAeb,QAAf,KACLS,QAAQ,CAAC;AACPK,MAAAA,IAAI,EAAE,OADC;AAEPF,MAAAA,OAAO,EAAE;AAAEC,QAAAA,IAAF;AAAQb,QAAAA;AAAR;AAFF,KAAD;AAFL,GAAP;AAOD,CAR6C,CAAf,CAQ5BR,uBAR4B,CAA/B;AAUA,SAASuB,sBAAT","sourcesContent":["import { useLocalStorage } from \"../../hooks/use-local-storage/useLocalStorage\";\nimport { api } from \"../../api/Api\";\nimport { socketConnector } from \"../../socket/react-socket-connector/react-socket-connector\";\nimport React from \"react\";\nimport {\n  DispatchProvider,\n  ValueProvider,\n} from \"../context/Authentication.context\";\nimport { AuthenticationType } from \"../types/Authentication.type\";\nimport {\n  AuthenticationActions,\n  AuthenticationActionTypes,\n  LoginAction,\n  LogoutAction,\n} from \"../types/Authentication.action-type\";\nimport { defaultAuthentication } from \"../context/default-context-value\";\n\nconst _AuthenticationProvider = ({ children }: any) => {\n  const [auth, setValue, remove] = useLocalStorage<AuthenticationType>(\n    \"login\",\n    {\n      ...defaultAuthentication,\n    }\n  );\n\n  const isAuthenticated = (): boolean => {\n    return false;\n  };\n\n  const login = async (username: string, password: string) => {\n    // socketLogin(name, password).then((res: any) => {\n    //   console.log(res);\n    //   setValue((val) => ({ ...val, isLoggedIn: true, name: name }));\n    // });\n    const res = await api.login(username, password);\n    console.log(res);\n    setValue((v) => ({ ...v, isLoggedIn: true, username: username }));\n  };\n\n  const logout = () => {\n    setValue((val) => ({ ...val, isLoggedIn: false, username: \"\", key: \"\" }));\n  };\n\n  const dispatch = (action: AuthenticationActions) => {\n    const _switch = {\n      [AuthenticationActionTypes.login]: (action: LoginAction) =>\n        login(action.payload.name, action.payload.password),\n      [AuthenticationActionTypes.logout]: (action: LogoutAction) => logout(),\n    };\n    // @ts-ignore\n    _switch[action.type]?.(action);\n  };\n\n  return (\n    <ValueProvider value={auth}>\n      <DispatchProvider value={dispatch}>{children}</DispatchProvider>\n    </ValueProvider>\n  );\n};\n\nconst AuthenticationProvider = socketConnector((dispatch) => {\n  return {\n    login: (name: string, password: string) =>\n      dispatch({\n        type: \"login\",\n        payload: { name, password },\n      }),\n  };\n})(_AuthenticationProvider);\n\nexport { AuthenticationProvider };\n"]},"metadata":{},"sourceType":"module"}