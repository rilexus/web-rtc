{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useRef } from \"react\";\nimport { socket } from \"../socket\";\n\nfunction useSubscription(type, callback) {\n  _s();\n\n  const ref = useRef(callback);\n  ref.current = callback;\n  useEffect(() => {\n    const handle = (...args) => {\n      callback(...args);\n    };\n\n    socket.on(type, handle);\n    return () => {\n      socket.removeEventListener(type, handle);\n    };\n  }, [type, ref]);\n}\n\n_s(useSubscription, \"8uVE59eA/r6b92xF80p7sH8rXLk=\");\n\nexport { useSubscription };","map":{"version":3,"sources":["/Users/stanislavpanchenko/Documents/development/web-rtc/web-rtc-client/src/socket/use-subscription/useSubscription.ts"],"names":["useEffect","useRef","socket","useSubscription","type","callback","ref","current","handle","args","on","removeEventListener"],"mappings":";;AAAA,SAAQA,SAAR,EAAmBC,MAAnB,QAAgC,OAAhC;AACA,SAAQC,MAAR,QAAqB,WAArB;;AAEA,SAASC,eAAT,CAAyBC,IAAzB,EAAuCC,QAAvC,EAAwE;AAAA;;AACtE,QAAMC,GAAG,GAAGL,MAAM,CAACI,QAAD,CAAlB;AACAC,EAAAA,GAAG,CAACC,OAAJ,GAAcF,QAAd;AAEAL,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMQ,MAAM,GAAG,CAAC,GAAGC,IAAJ,KAAkB;AAC/BJ,MAAAA,QAAQ,CAAC,GAAGI,IAAJ,CAAR;AACD,KAFD;;AAGAP,IAAAA,MAAM,CAACQ,EAAP,CAAUN,IAAV,EAAgBI,MAAhB;AACA,WAAO,MAAM;AACXN,MAAAA,MAAM,CAACS,mBAAP,CAA2BP,IAA3B,EAAiCI,MAAjC;AACD,KAFD;AAGD,GARQ,EAQN,CAACJ,IAAD,EAAME,GAAN,CARM,CAAT;AAUD;;GAdQH,e;;AAeT,SAAQA,eAAR","sourcesContent":["import {useEffect, useRef} from \"react\";\nimport {socket} from \"../socket\";\n\nfunction useSubscription(type: string, callback: (...args: any) => void){\n  const ref = useRef(callback)\n  ref.current = callback\n\n  useEffect(() => {\n    const handle = (...args: any) => {\n      callback(...args)\n    }\n    socket.on(type, handle)\n    return () => {\n      socket.removeEventListener(type, handle)\n    }\n  }, [type,ref])\n\n}\nexport {useSubscription}"]},"metadata":{},"sourceType":"module"}