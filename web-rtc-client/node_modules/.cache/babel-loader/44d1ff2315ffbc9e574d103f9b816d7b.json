{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/stanislavpanchenko/Documents/development/web-rtc/web-rtc-client/src/pages/chat/Chat.page.tsx\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { LogoutButton } from \"./components/logout-button/logout-button\";\nimport { UserList } from \"./components/user-list/UserList\";\nimport { useSubscription } from \"../../socket/use-subscription/useSubscription\";\nimport { socket } from \"../../socket/socket\";\nconst configuration = {\n  iceServers: [{\n    urls: \"stun:192.168.2.120:3478\",\n    username: \"username\",\n    credential: \"password\"\n  }]\n};\nconst peerConnection = new RTCPeerConnection(configuration);\n\nconst ChatPage = () => {\n  _s();\n\n  useSubscription(\"video:answer\", async ({\n    answer\n  }) => {\n    const remoteDesc = new RTCSessionDescription(answer);\n    await peerConnection.setRemoteDescription(remoteDesc);\n  });\n  useSubscription(\"video:offer\", async ({\n    offer\n  }) => {\n    console.log(offer);\n  });\n\n  const onVideo = async name => {\n    const offer = await peerConnection.createOffer();\n    await peerConnection.setLocalDescription(offer);\n    socket.emit(\"video:offer\", {\n      offer,\n      to: name\n    });\n  };\n\n  const onAudio = name => {};\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(UserList, {\n      onAudio: onAudio,\n      onVideo: onVideo\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(LogoutButton, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ChatPage, \"6dXpL+zA1v+abLu5M5eMPEZQIfg=\", false, function () {\n  return [useSubscription, useSubscription];\n});\n\n_c = ChatPage;\nexport { ChatPage };\n\nvar _c;\n\n$RefreshReg$(_c, \"ChatPage\");","map":{"version":3,"sources":["/Users/stanislavpanchenko/Documents/development/web-rtc/web-rtc-client/src/pages/chat/Chat.page.tsx"],"names":["React","LogoutButton","UserList","useSubscription","socket","configuration","iceServers","urls","username","credential","peerConnection","RTCPeerConnection","ChatPage","answer","remoteDesc","RTCSessionDescription","setRemoteDescription","offer","console","log","onVideo","name","createOffer","setLocalDescription","emit","to","onAudio"],"mappings":";;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,YAAT,QAA6B,0CAA7B;AACA,SAASC,QAAT,QAAyB,iCAAzB;AACA,SAASC,eAAT,QAAgC,+CAAhC;AACA,SAASC,MAAT,QAAuB,qBAAvB;AAEA,MAAMC,aAAa,GAAG;AACpBC,EAAAA,UAAU,EAAE,CACV;AACEC,IAAAA,IAAI,EAAE,yBADR;AAEEC,IAAAA,QAAQ,EAAE,UAFZ;AAGEC,IAAAA,UAAU,EAAE;AAHd,GADU;AADQ,CAAtB;AASA,MAAMC,cAAc,GAAG,IAAIC,iBAAJ,CAAsBN,aAAtB,CAAvB;;AAEA,MAAMO,QAAQ,GAAG,MAAM;AAAA;;AACrBT,EAAAA,eAAe,CAAC,cAAD,EAAiB,OAAO;AAAEU,IAAAA;AAAF,GAAP,KAAsB;AACpD,UAAMC,UAAU,GAAG,IAAIC,qBAAJ,CAA0BF,MAA1B,CAAnB;AACA,UAAMH,cAAc,CAACM,oBAAf,CAAoCF,UAApC,CAAN;AACD,GAHc,CAAf;AAKAX,EAAAA,eAAe,CAAC,aAAD,EAAgB,OAAO;AAAEc,IAAAA;AAAF,GAAP,KAAqB;AAClDC,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD,GAFc,CAAf;;AAIA,QAAMG,OAAO,GAAG,MAAOC,IAAP,IAAwB;AACtC,UAAMJ,KAAK,GAAG,MAAMP,cAAc,CAACY,WAAf,EAApB;AACA,UAAMZ,cAAc,CAACa,mBAAf,CAAmCN,KAAnC,CAAN;AACAb,IAAAA,MAAM,CAACoB,IAAP,CAAY,aAAZ,EAA2B;AAAEP,MAAAA,KAAF;AAASQ,MAAAA,EAAE,EAAEJ;AAAb,KAA3B;AACD,GAJD;;AAMA,QAAMK,OAAO,GAAIL,IAAD,IAAkB,CAAE,CAApC;;AACA,sBACE;AAAA,4BACE,QAAC,QAAD;AAAU,MAAA,OAAO,EAAEK,OAAnB;AAA4B,MAAA,OAAO,EAAEN;AAArC;AAAA;AAAA;AAAA;AAAA,YADF,eAEE,QAAC,YAAD;AAAA;AAAA;AAAA;AAAA,YAFF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAMD,CAvBD;;GAAMR,Q;UACJT,e,EAKAA,e;;;KANIS,Q;AAyBN,SAASA,QAAT","sourcesContent":["import React from \"react\";\nimport { LogoutButton } from \"./components/logout-button/logout-button\";\nimport { UserList } from \"./components/user-list/UserList\";\nimport { useSubscription } from \"../../socket/use-subscription/useSubscription\";\nimport { socket } from \"../../socket/socket\";\n\nconst configuration = {\n  iceServers: [\n    {\n      urls: \"stun:192.168.2.120:3478\",\n      username: \"username\",\n      credential: \"password\",\n    },\n  ],\n};\nconst peerConnection = new RTCPeerConnection(configuration);\n\nconst ChatPage = () => {\n  useSubscription(\"video:answer\", async ({ answer }) => {\n    const remoteDesc = new RTCSessionDescription(answer);\n    await peerConnection.setRemoteDescription(remoteDesc);\n  });\n\n  useSubscription(\"video:offer\", async ({ offer }) => {\n    console.log(offer);\n  });\n\n  const onVideo = async (name: string) => {\n    const offer = await peerConnection.createOffer();\n    await peerConnection.setLocalDescription(offer);\n    socket.emit(\"video:offer\", { offer, to: name });\n  };\n\n  const onAudio = (name: string) => {};\n  return (\n    <div>\n      <UserList onAudio={onAudio} onVideo={onVideo} />\n      <LogoutButton />\n    </div>\n  );\n};\n\nexport { ChatPage };\n"]},"metadata":{},"sourceType":"module"}