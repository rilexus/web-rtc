{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/stanislavpanchenko/Documents/development/web-rtc/web-rtc-client/src/socket/react-socket-connector/react-socket-connector.tsx\";\nimport React from \"react\";\nimport { socket } from \"../socket\";\n\nfunction socketConnector(socketInstanceMapper) {\n  const dispatch = action => {\n    if (typeof action === \"function\") {\n      action(dispatch);\n    } else {\n      return new Promise((res, rej) => {\n        try {\n          const {\n            type,\n            ...rest\n          } = action;\n          socket.emit(type, rest, res);\n        } catch (e) {\n          rej(e);\n        }\n      });\n    }\n  };\n\n  const mappedSocket = socketInstanceMapper(dispatch);\n\n  const WithSocket = Component => {\n    WithSocket.displayName = `withSocket(${Component.displayName || \"Component\"})`;\n    return props => /*#__PURE__*/_jsxDEV(Component, { ...props,\n      ...mappedSocket\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 28\n    }, this);\n  };\n\n  return WithSocket;\n}\n\nexport { socketConnector };","map":{"version":3,"sources":["/Users/stanislavpanchenko/Documents/development/web-rtc/web-rtc-client/src/socket/react-socket-connector/react-socket-connector.tsx"],"names":["React","socket","socketConnector","socketInstanceMapper","dispatch","action","Promise","res","rej","type","rest","emit","e","mappedSocket","WithSocket","Component","displayName","props"],"mappings":";;AAAA,OAAOA,KAAP,MAAiC,OAAjC;AACA,SAASC,MAAT,QAAuB,WAAvB;;AAIA,SAASC,eAAT,CACEC,oBADF,EAEE;AACA,QAAMC,QAAQ,GAAIC,MAAD,IAAoB;AACnC,QAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AAChCA,MAAAA,MAAM,CAACD,QAAD,CAAN;AACD,KAFD,MAEO;AACL,aAAO,IAAIE,OAAJ,CAAY,CAACC,GAAD,EAAMC,GAAN,KAAc;AAC/B,YAAI;AACF,gBAAM;AAAEC,YAAAA,IAAF;AAAQ,eAAGC;AAAX,cAAoBL,MAA1B;AACAJ,UAAAA,MAAM,CAACU,IAAP,CAAYF,IAAZ,EAAkBC,IAAlB,EAAwBH,GAAxB;AACD,SAHD,CAGE,OAAOK,CAAP,EAAS;AACTJ,UAAAA,GAAG,CAACI,CAAD,CAAH;AACD;AACF,OAPM,CAAP;AAQD;AACF,GAbD;;AAcA,QAAMC,YAAY,GAAGV,oBAAoB,CAACC,QAAD,CAAzC;;AAEA,QAAMU,UAAe,GAAIC,SAAD,IAAoB;AAC1CD,IAAAA,UAAU,CAACE,WAAX,GAA0B,cACxBD,SAAS,CAACC,WAAV,IAAyB,WAC1B,GAFD;AAGA,WAAQC,KAAD,iBAAgB,QAAC,SAAD,OAAeA,KAAf;AAAA,SAA0BJ;AAA1B;AAAA;AAAA;AAAA;AAAA,YAAvB;AACD,GALD;;AAOA,SAAOC,UAAP;AACD;;AAED,SAASZ,eAAT","sourcesContent":["import React, { ReactNode } from \"react\";\nimport { socket } from \"../socket\";\n\ntype Action = { type: string; [key: string]: any } | Function;\n\nfunction socketConnector(\n  socketInstanceMapper: (dispatch: (action: Action) => void) => void\n) {\n  const dispatch = (action: Action) => {\n    if (typeof action === \"function\") {\n      action(dispatch);\n    } else {\n      return new Promise((res, rej) => {\n        try {\n          const { type, ...rest } = action;\n          socket.emit(type, rest, res);\n        } catch (e){\n          rej(e)\n        }\n      })\n    }\n  };\n  const mappedSocket = socketInstanceMapper(dispatch);\n\n  const WithSocket: any = (Component: any) => {\n    WithSocket.displayName = `withSocket(${\n      Component.displayName || \"Component\"\n    })`;\n    return (props: any) => <Component {...props} {...mappedSocket} />;\n  };\n\n  return WithSocket;\n}\n\nexport { socketConnector };\n"]},"metadata":{},"sourceType":"module"}